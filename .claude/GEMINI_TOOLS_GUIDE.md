# Gemini å·¥å…·ä½¿ç”¨æŒ‡å—

> ä¸º Claude Code å‡†å¤‡çš„ Gemini API ä½¿ç”¨æŒ‡å—
> æœ€åæ›´æ–°ï¼š2026-02-08

---

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

**ä¼˜å…ˆä½¿ç”¨ Gemini** - ç”¨æˆ·æ˜ç¡®è¦æ±‚ï¼š
1. âœ… **è”ç½‘æœç´¢** â†’ ä½¿ç”¨ `gemini_chat` å·¥å…·
2. âœ… **å›¾åƒç”Ÿæˆ** â†’ ä½¿ç”¨ `generate_image` å·¥å…·ï¼ˆä¼˜å…ˆ 3 Proï¼‰
3. âœ… **å›¾åƒåˆ†æ** â†’ ä½¿ç”¨ `analyze_image` å·¥å…·
4. âœ… **è§†é¢‘åˆ†æ** â†’ ä½¿ç”¨ `analyze_video` å·¥å…·

---

## ğŸ“¦ å¯ç”¨å·¥å…·

### 1. gemini_chat - å¯¹è¯ + è”ç½‘æœç´¢

**åŠŸèƒ½**ï¼š
- å¤æ‚æ¨ç†
- ä»£ç ç”Ÿæˆ
- é•¿æ–‡æ¡£åˆ†æ
- **è”ç½‘æœç´¢**ï¼ˆè®¾ç½® `search: true`ï¼‰

**å‚æ•°**ï¼š
```json
{
  "prompt": "ç”¨æˆ·é—®é¢˜",
  "model": "gemini-3-pro-preview",  // æˆ– gemini-3-flash-preview
  "search": false  // æ˜¯å¦å¯ç”¨è”ç½‘æœç´¢
}
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- âŒ ä¸è¦ç”¨äºï¼šçº¯æ–‡æœ¬å¯¹è¯ï¼ˆä½¿ç”¨ GLM ä¸»æ¨¡å‹ï¼‰
- âœ… é€‚ç”¨äºï¼šéœ€è¦å®æ—¶ä¿¡æ¯çš„æœç´¢
- âœ… é€‚ç”¨äºï¼šéœ€è¦è”ç½‘èƒ½åŠ›çš„ä»»åŠ¡

**ç¤ºä¾‹**ï¼š
```bash
# æœç´¢å®æ—¶å¤©æ°”
gemini_chat(prompt="ä»Šå¤©æˆéƒ½å¤©æ°”å¦‚ä½•ï¼Ÿ", search=true)

# æœç´¢æœ€æ–°æ–°é—»
gemini_chat(prompt="æœç´¢ 2026 å¹´æœ€æ–°çš„ AI æ–°é—»", search=true)
```

---

### 2. generate_image - å›¾åƒç”Ÿæˆ

**åŠŸèƒ½**ï¼š
- ä½¿ç”¨ **Gemini 3 Pro Image Preview** ç”Ÿæˆé«˜è´¨é‡å›¾ç‰‡
- æ”¯æŒå¤šç§é£æ ¼å’Œä¸»é¢˜

**å‚æ•°**ï¼š
```json
{
  "prompt": "å›¾åƒæè¿°",
  "model": "gemini-3-pro-image-preview",  // ä¼˜å…ˆä½¿ç”¨ï¼ˆæœ€é«˜è´¨é‡ï¼‰
  // "model": "gemini-2.5-flash-image",  // å¤‡é€‰ï¼ˆæ›´å¿«ï¼‰
  "save_path": "/tmp/image.jpg"  // å¯é€‰
}
```

**æ¨¡å‹é€‰æ‹©**ï¼š
- **`gemini-3-pro-image-preview`** â­â­â­ - æœ€é«˜è´¨é‡ï¼Œé»˜è®¤ä½¿ç”¨
- **`gemini-2.5-flash-image`** - æ›´å¿«ï¼Œè´¨é‡ç•¥ä½

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… äº§å“å±•ç¤ºå›¾
- âœ… è‰ºæœ¯åˆ›ä½œ
- âœ… æ¦‚å¿µè®¾è®¡
- âœ… æ’ç”»ç”Ÿæˆ

**ç¤ºä¾‹æç¤ºè¯**ï¼š
```
"ç”»ä¸€åªå¯çˆ±çš„æ©˜çŒ«ï¼Œååœ¨æ¨±èŠ±æ ‘ä¸‹ï¼Œé˜³å…‰æ˜åªšï¼Œæ˜¥å¤©çš„æ™¯è‰²ï¼Œæ¸©æš–æ²»æ„ˆçš„é£æ ¼"
"Generate a cyberpunk city at night with neon lights"
"ç”Ÿæˆä¸€å‰¯ç°ä»£ç®€çº¦é£æ ¼çš„Logoï¼Œä¸»é¢˜æ˜¯AIåŠ©æ‰‹"
```

---

### 3. analyze_image - å›¾åƒåˆ†æ

**åŠŸèƒ½**ï¼š
- ç†è§£å›¾ç‰‡å†…å®¹
- æå–æ–‡å­—ï¼ˆOCRï¼‰
- åˆ†æåœºæ™¯

**å‚æ•°**ï¼š
```json
{
  "image_path": "/path/to/image.png",
  "prompt": "è¯·æè¿°è¿™å¼ å›¾ç‰‡çš„å†…å®¹"
}
```

---

### 4. analyze_video - è§†é¢‘åˆ†æ

**åŠŸèƒ½**ï¼š
- æå–è§†é¢‘å†…å®¹æ‘˜è¦
- åˆ†æå…³é”®å¸§
- æå–æ–‡å­—ä¿¡æ¯

**å‚æ•°**ï¼š
```json
{
  "video_path": "/path/to/video.mp4",
  "prompt": "è¯·æ€»ç»“è¿™ä¸ªè§†é¢‘çš„ä¸»è¦å†…å®¹"
}
```

---

## ğŸš€ å®æˆ˜å»ºè®®

### è”ç½‘æœç´¢ä¼˜å…ˆçº§

```
1ï¸âƒ£ gemini_chat (search=true)  â­â­â­ Geminiï¼ˆé¦–é€‰ï¼‰
   â”œâ”€ æ”¯æŒå®æ—¶ä¿¡æ¯
   â”œâ”€ ä¸­è‹±æ–‡æœç´¢èƒ½åŠ›å¼º
   â””â”€ API Key: AIzaSyB3CqdMVGrkTKsp2844sr-4EIrlyTJH_sA

   â†“ å¦‚æœé™é¢/å¤±è´¥ â†“

2ï¸âƒ£ Kimi kimi_chat (agent)  â­â­â­ å¤‡ç”¨
   â”œâ”€ ä»˜è´¹ 50å…ƒï¼Œé¢åº¦å……è¶³
   â”œâ”€ ä¸­æ–‡æœç´¢èƒ½åŠ›å¼º
   â””â”€ API Key: sk-EgMh1zC8S0wSkwrwbCHgvYPKwaMEcQlgEYJRzJnjeGuGxulm

   â†“ å¦‚æœå¤±è´¥ â†“

3ï¸âƒ£ Antigravity Browser  â­â­â­ å†é™çº§
   â””â”€ çœŸå®æµè§ˆå™¨æ“ä½œ

   â†“ å¦‚æœå¤±è´¥ â†“

4ï¸âƒ£ Bash curl + grep  â­ åº”æ€¥æ–¹æ¡ˆ
```

### å›¾åƒç”Ÿæˆä¼˜å…ˆçº§

```
1ï¸âƒ£ gemini-3-pro-image-preview  â­â­â­ æœ€é«˜è´¨é‡ï¼ˆé»˜è®¤ï¼‰
   â”œâ”€ Banana Pro
   â”œâ”€ ç”Ÿæˆé€Ÿåº¦ï¼šä¸­ç­‰
   â””â”€ å›¾ç‰‡è´¨é‡ï¼šæœ€é«˜

   â†“ å¦‚æœç”¨æˆ·è¦æ±‚æ›´å¿« â†“

2ï¸âƒ£ gemini-2.5-flash-image  â­â­ å¿«é€Ÿç”Ÿæˆ
   â”œâ”€ ç”Ÿæˆé€Ÿåº¦å¿«
   â””â”€ å›¾ç‰‡è´¨é‡ï¼šç•¥ä½
```

---

## ğŸ”§ MCP æœåŠ¡å™¨é…ç½®

**ä½ç½®**ï¼š`~/.claude/mcp-servers/gemini-pro/`

**ç«¯å£**ï¼š`3002`

**API Key**ï¼šä» `~/.claude/.env.gemini` è¯»å–

**å¥åº·æ£€æŸ¥**ï¼š
```bash
curl http://localhost:3002/health
```

**é‡å¯æœåŠ¡**ï¼š
```bash
cd ~/.claude/mcp-servers/gemini-pro
lsof -ti:3002 | xargs kill -9
nohup node server.js > /tmp/gemini-mcp.log 2>&1 &
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### Gemini å›¾åƒç”Ÿæˆé™åˆ¶

æ ¹æ®æµ‹è¯•ï¼ŒGemini å›¾åƒç”Ÿæˆæœ‰ä¸¥æ ¼çš„å®‰å…¨ç­–ç•¥ï¼š

âŒ **é¿å…çš„æç¤ºè¯**ï¼š
- "åŠ¨æ¼«é£æ ¼" + "å¯çˆ±" â†’ å¯èƒ½è¢«æ‹’ç»ï¼ˆæ¶‰å«Œå„¿ç«¥å¸å¼•ï¼‰
- çœŸå®åœ°ç‚¹æè¿° â†’ å¯èƒ½è¢«æ‹’ç»ï¼ˆæ¶‰å«ŒçœŸå®åœ°ç‚¹ï¼‰
- è¿‡äºå…·ä½“çš„æè¿° â†’ å¯èƒ½è¢«æ‹’ç»ï¼ˆæ¶‰å«Œ PIIï¼‰

âœ… **æ¨èçš„æç¤ºè¯**ï¼š
- ä½¿ç”¨è‹±è¯­æè¿°ï¼ˆæ›´å‡†ç¡®ï¼‰
- ä¸“æ³¨äºåœºæ™¯ã€æ°›å›´ã€æ„å›¾
- é¿å…"å¯çˆ±"ã€"èŒ"ç­‰è¯æ±‡
- ä½¿ç”¨"æ¸©é¦¨"ã€"æ²»æ„ˆ"æ›¿ä»£

### ç¤ºä¾‹å¯¹æ¯”

```
âŒ "ç”»ä¸€åªå¯çˆ±çš„åŠ¨æ¼«çŒ«å’ª"
âœ… "A warm orange tabby cat resting under cherry blossoms, natural lighting"

âŒ "ç”Ÿæˆä¸Šæµ·å¤–æ»©çš„é£æ™¯"
âœ… "Generate a city skyline with river, modern buildings, golden sunset lighting"
```

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

### è”ç½‘æœç´¢

| å·¥å…· | é€Ÿåº¦ | å‡†ç¡®æ€§ | æˆæœ¬ |
|------|------|--------|------|
| **gemini_chat** | â­â­â­ å¿« | â­â­â­ é«˜ | å…è´¹ |
| Kimi kimi_chat | â­â­â­ å¿« | â­â­â­ é«˜ | ä»˜è´¹ |
| Antigravity | â­â­ æ…¢ | â­â­â­ é«˜ | å…è´¹ |

### å›¾åƒç”Ÿæˆ

| æ¨¡å‹ | è´¨é‡ | é€Ÿåº¦ | æ¨èç”¨é€” |
|------|------|------|----------|
| **gemini-3-pro-image-preview** | â­â­â­ | â­â­ | äº§å“å›¾ã€è‰ºæœ¯åˆ›ä½œ |
| gemini-2.5-flash-image | â­â­ | â­â­â­ | å¿«é€ŸåŸå‹ã€æ¦‚å¿µå›¾ |

---

## ğŸ¯ å¿«é€Ÿå‚è€ƒ

### å¸¸ç”¨å‘½ä»¤

```bash
# è”ç½‘æœç´¢
æœç´¢ "ä»Šå¤©æˆéƒ½å¤©æ°”"
â†’ gemini_chat(prompt="ä»Šå¤©æˆéƒ½å¤©æ°”å¦‚ä½•ï¼Ÿ", search=true)

# ç”Ÿæˆå›¾ç‰‡ï¼ˆé»˜è®¤ 3 Proï¼‰
ç”Ÿæˆ "ä¸€åªæ©˜çŒ«åœ¨æ¨±èŠ±æ ‘ä¸‹"
â†’ generate_image(prompt="ç”»ä¸€åªå¯çˆ±çš„æ©˜çŒ«ï¼Œååœ¨æ¨±èŠ±æ ‘ä¸‹ï¼Œé˜³å…‰æ˜åªšï¼Œæ˜¥å¤©çš„æ™¯è‰²")

# åˆ†æå›¾ç‰‡
åˆ†æè¿™å¼ å›¾ç‰‡ "/tmp/photo.jpg"
â†’ analyze_image(image_path="/tmp/photo.jpg", prompt="è¯·æè¿°è¿™å¼ å›¾ç‰‡çš„å†…å®¹")

# åˆ†æè§†é¢‘
æ€»ç»“è¿™ä¸ªè§†é¢‘ "/tmp/video.mp4"
â†’ analyze_video(video_path="/tmp/video.mp4", prompt="è¯·æ€»ç»“è¿™ä¸ªè§†é¢‘çš„ä¸»è¦å†…å®¹")
```

---

## âœ… æµ‹è¯•è®°å½• (2026-02-08)

### å›¾åƒç”Ÿæˆæµ‹è¯•æˆåŠŸ

**æµ‹è¯• 1: Gemini 3 Pro Image Preview**
```bash
curl -X POST http://localhost:3002/mcp/v1 \
  -H "Content-Type: application/json" \
  -d '{
    "method": "tools/call",
    "params": {
      "name": "generate_image",
      "arguments": {
        "prompt": "ä¸€åªæ©˜çŒ«åœ¨æ¨±èŠ±æ ‘ä¸‹ï¼Œæ—¥æœ¬é£æ ¼ï¼Œé«˜è´¨é‡",
        "model": "gemini-3-pro-image-preview"
      }
    }
  }'
```

**ç»“æœ**: âœ… æˆåŠŸ
- æ–‡ä»¶å¤§å°: 1099.42 KB (1.1 MB)
- åˆ†è¾¨ç‡: 1408x768
- æ ¼å¼: JPEG
- ç”Ÿæˆæ—¶é—´: ~18ç§’

**æµ‹è¯• 2: Gemini 2.5 Flash Image (Nano Banana)**
```bash
prompt: "ä¸€åªæŸ¯åŸºçŠ¬åœ¨æµ·æ»©ä¸Šç©è€ï¼Œé˜³å…‰æ˜åªš"
```

**ç»“æœ**: âœ… æˆåŠŸ
- æ–‡ä»¶å¤§å°: 1648.04 KB (1.6 MB)
- ç”Ÿæˆæ—¶é—´: ~8ç§’
- æ³¨æ„: æ­¤æ¨¡å‹ä¼šè¿”å›æ–‡æœ¬æè¿° + å›¾ç‰‡

### æœåŠ¡å™¨é…ç½®ç¡®è®¤

- **MCP æœåŠ¡å™¨**: http://localhost:3002
- **çŠ¶æ€**: âœ… æ­£å¸¸è¿è¡Œ
- **API Key**: âœ… å·²é…ç½®
- **ç¯å¢ƒå˜é‡**: ä» `~/.claude/.env.gemini` è¯»å–
- **æ—¥å¿—ä½ç½®**: `/tmp/gemini-mcp.log`

### å…³é”®å‘ç°

1. **å›¾ç‰‡æ•°æ®ç»“æ„**: `data.candidates[0].content.parts[]`
   - 3 Pro æ¨¡å‹: ç›´æ¥è¿”å›å›¾ç‰‡æ•°æ®
   - 2.5 Flash æ¨¡å‹: å¯èƒ½è¿”å›æ–‡æœ¬ + å›¾ç‰‡(å¤šä¸ª parts)

2. **Base64 ç¼–ç **: å›¾ç‰‡æ•°æ®ä½¿ç”¨ Base64 ç¼–ç åœ¨ `inlineData.data` å­—æ®µ

3. **MIME ç±»å‹**: è¿”å› `image/jpeg`

---

**æœ€åæ›´æ–°**ï¼š2026-02-08
**ç»´æŠ¤è€…**ï¼šé‡‘ç”° + Claude Code
**çŠ¶æ€**: âœ… æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡
